ç‚¹å‡»å…³æ³¨ ğŸ‘‰Â é¡¶çº§æ¶æ„å¸ˆ
_2022å¹´03æœˆ31æ—¥ 17:33_
æ¥æºï¼šjuejin.cn/post/7062146999616798727
ä¸Šä¸€ç¯‡ï¼š[é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰çš„å‡ ç§å…¸å‹æ¶æ„ä»‹ç»ï¼ˆå›¾æ–‡è¯¦è§£ï¼‰](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533791&idx=1&sn=35fe44b1f81b7cfc53adeaf5016c7d44&chksm=e8dae57adfad6c6c9249a71c4b7f06a04a6e201f1a2a356ca2ac9bd4ef362d6859a3977984dd&scene=21#wechat_redirect)

****å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é¡¶çº§æ¶æ„å¸ˆã€‚****

![å›¾ç‰‡](https://mmbiz.qpic.cn/sz_mmbiz_png/gHvX5TiczgWnhXnkWaR8rJ6TiaGRrFxU9IJ6pfvwphmfUuhtUfHuUGfYqCmRF2jibB5amEIkF56BEII7Rtns4A5aQ/640?wx_fmt=png&wxfrom=13)

Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œç‰¹ç‚¹æ˜¯å ç”¨å†…å­˜å°‘ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œäº‹å®ä¸Š Nginx çš„å¹¶å‘èƒ½åŠ›ç¡®å®åœ¨åŒç±»å‹çš„ç½‘é¡µæœåŠ¡å™¨ä¸­è¡¨ç°è¾ƒå¥½ã€‚\
Nginx ä¸“ä¸ºæ€§èƒ½ä¼˜åŒ–è€Œå¼€å‘ï¼Œæ€§èƒ½æ˜¯å…¶æœ€é‡è¦çš„è¦æ±‚ï¼Œååˆ†æ³¨é‡æ•ˆç‡ï¼Œæœ‰æŠ¥å‘Š Nginx èƒ½æ”¯æŒé«˜è¾¾ 50000 ä¸ªå¹¶å‘è¿æ¥æ•°ã€‚

**01** **Nginx çŸ¥è¯†ç½‘ç»“æ„å›¾**
Nginx çš„çŸ¥è¯†ç½‘ç»“æ„å›¾å¦‚ä¸‹ï¼š

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz/K0TMNq37VN28Cq2l76Q0pUpBuvBWcmI4J9ibicG7IqjUjAmXZ37WNrvN0BXjtF6bmroO9Foxm4eQz9mPJ580pSdg/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

**02\*\*\*\*åå‘ä»£ç†**

\*\*æ­£å‘ä»£ç†ï¼š\*\*å±€åŸŸç½‘ä¸­çš„ç”µè„‘ç”¨æˆ·æƒ³è¦ç›´æ¥è®¿é—®ç½‘ç»œæ˜¯ä¸å¯è¡Œçš„ï¼Œåªèƒ½é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®ï¼Œè¿™ç§ä»£ç†æœåŠ¡å°±è¢«ç§°ä¸ºæ­£å‘ä»£ç†ã€‚

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz/K0TMNq37VN28Cq2l76Q0pUpBuvBWcmI4nHjmfqAJ909p4IxXsyEVw3ibTbDtWVOR3XI4zg3jibsjuJ0BKGnAmlAg/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

\*\*åå‘ä»£ç†ï¼š\*\*å®¢æˆ·ç«¯æ— æ³•æ„ŸçŸ¥ä»£ç†ï¼Œå› ä¸ºå®¢æˆ·ç«¯è®¿é—®ç½‘ç»œä¸éœ€è¦é…ç½®ï¼Œåªè¦æŠŠè¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±åå‘ä»£ç†æœåŠ¡å™¨å»é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®ï¼Œç„¶åå†è¿”å›åˆ°å®¢æˆ·ç«¯ã€‚

æ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œéšè—äº†çœŸå®æœåŠ¡å™¨ IP åœ°å€ã€‚

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz/K0TMNq37VN28Cq2l76Q0pUpBuvBWcmI4RAt9Hicic96l0QwHOmgC3WicsN67kDZgmkvs7pr5ENicdy8atic1FK90mKw/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

**03**

**è´Ÿè½½å‡è¡¡**

å®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œæœ‰ä¸€äº›å¯èƒ½è¦ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•ä¹‹åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚

æ™®é€šè¯·æ±‚å’Œå“åº”è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz/K0TMNq37VN28Cq2l76Q0pUpBuvBWcmI4DtTUsXwwBbM3Q9WFQjzPjIOCB09KN7dXiamticEzn2RsjnJyYlGSqDAg/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

ä½†æ˜¯éšç€ä¿¡æ¯æ•°é‡å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡é£é€Ÿå¢é•¿ï¼Œæ™®é€šæ¶æ„æ— æ³•æ»¡è¶³ç°åœ¨çš„éœ€æ±‚ã€‚
æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯å‡çº§æœåŠ¡å™¨é…ç½®ï¼Œå¯ä»¥ç”±äºæ‘©å°”å®šå¾‹çš„æ—¥ç›Šå¤±æ•ˆï¼Œå•çº¯ä»ç¡¬ä»¶æå‡æ€§èƒ½å·²ç»é€æ¸ä¸å¯å–äº†ï¼Œæ€ä¹ˆè§£å†³è¿™ç§éœ€æ±‚å‘¢ï¼Ÿ
æˆ‘ä»¬å¯ä»¥å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œæ„å»ºé›†ç¾¤ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸæ¥è¯·æ±‚é›†ä¸­åˆ°å•ä¸ªæœåŠ¡å™¨çš„æƒ…å†µæ”¹ä¸ºè¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„è´Ÿè½½å‡è¡¡ã€‚

å›¾è§£è´Ÿè½½å‡è¡¡ï¼š

![å›¾ç‰‡](https://mmbiz.qpic.cn/mmbiz/K0TMNq37VN28Cq2l76Q0pUpBuvBWcmI4EwZkaLS3ZibyHvaSiaXMA6tStFdIqicWYGO9UDnAHAKOjiaIkvhAkwGAAw/640?wx_fmt=jpeg&tp=wxpic&wxfrom=5&wx_lazy=1&wx_co=1)

å‡è®¾æœ‰ 15 ä¸ªè¯·æ±‚å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ï¼Œé‚£ä¹ˆç”±ä»£ç†æœåŠ¡å™¨æ ¹æ®æœåŠ¡å™¨æ•°é‡ï¼Œå¹³å‡åˆ†é…ï¼Œæ¯ä¸ªæœåŠ¡å™¨å¤„ç† 5 ä¸ªè¯·æ±‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«åšè´Ÿè½½å‡è¡¡ã€‚

**04\*\*\*\*åŠ¨é™åˆ†ç¦»**

ä¸ºäº†åŠ å¿«ç½‘ç«™çš„è§£æé€Ÿåº¦ï¼Œå¯ä»¥æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢äº¤ç»™ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æçš„é€Ÿåº¦ï¼Œé™ä½ç”±å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚æ‰©å±•ï¼š[æ¥ç§æ´»å„¿](http://mp.weixin.qq.com/s?__biz=MzkxMDI2NzUxNA==&mid=2247487905&idx=1&sn=807099c4af99516ea78a743faec8b994&chksm=c12f54b4f658dda2d0c3aba752d4f5d89769ed9e04a863a0b28887c0628155013c4b9382af5c&scene=21#wechat_redirect)

åŠ¨é™åˆ†ç¦»ä¹‹å‰çš„çŠ¶æ€ï¼š
!\[\[Pasted image 20241006112144.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

åŠ¨é™åˆ†ç¦»ä¹‹åï¼š
!\[\[Pasted image 20241006112149.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

**05\*\*\*\*Nginxå®‰è£…**

Nginx å¦‚ä½•åœ¨ Linux å®‰è£…
å‚è€ƒé“¾æ¥ï¼š
`https://blog.csdn.net/yujing1314/article/details/97267369`

Nginx å¸¸ç”¨å‘½ä»¤

æŸ¥çœ‹ç‰ˆæœ¬ï¼š

`./nginxÂ -v      `

å¯åŠ¨ï¼š

`./nginx      `

å…³é—­ï¼ˆæœ‰ä¸¤ç§æ–¹å¼ï¼Œæ¨èä½¿ç”¨ ./nginx -s quitï¼‰ï¼š

`./nginxÂ -sÂ stopÂ ./nginxÂ -sÂ quit`

é‡æ–°åŠ è½½ Nginx é…ç½®ï¼š

`./nginxÂ -sÂ reload      `

Nginx çš„é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶åˆ†ä¸‰éƒ¨åˆ†ç»„æˆï¼š

##### **â‘ å…¨å±€å—**

ä»é…ç½®æ–‡ä»¶å¼€å§‹åˆ° events å—ä¹‹é—´ï¼Œä¸»è¦æ˜¯è®¾ç½®ä¸€äº›å½±å“ Nginx æœåŠ¡å™¨æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤ã€‚

å¹¶å‘å¤„ç†æœåŠ¡çš„é…ç½®ï¼Œå€¼è¶Šå¤§ï¼Œå¯ä»¥æ”¯æŒçš„å¹¶å‘å¤„ç†é‡è¶Šå¤šï¼Œä½†æ˜¯ä¼šå—åˆ°ç¡¬ä»¶ã€è½¯ä»¶ç­‰è®¾å¤‡çš„åˆ¶çº¦ã€‚
!\[\[Pasted image 20241006112207.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

##### **â‘¡events å—**

å½±å“ Nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼Œå¸¸ç”¨çš„è®¾ç½®åŒ…æ‹¬æ˜¯å¦å¼€å¯å¯¹å¤š workprocess ä¸‹çš„ç½‘ç»œè¿æ¥è¿›è¡Œåºåˆ—åŒ–ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥æ”¶å¤šä¸ªç½‘ç»œè¿æ¥ç­‰ç­‰ã€‚

æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°ï¼š
!\[\[Pasted image 20241006112210.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

##### **â‘¢HTTP å—**

è¯¸å¦‚åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡éƒ½åœ¨æ­¤é…ç½®ã€‚

`location[Â =Â |Â ~Â |Â ~*Â |Â ^~]Â url{}      `

location æŒ‡ä»¤è¯´æ˜ï¼Œè¯¥è¯­æ³•ç”¨æ¥åŒ¹é… urlï¼Œè¯­æ³•å¦‚ä¸Šï¼š

- \*\*=ï¼š\*\*ç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ url å‰ï¼Œè¦æ±‚å­—ç¬¦ä¸²ä¸ url ä¸¥æ ¼åŒ¹é…ï¼ŒåŒ¹é…æˆåŠŸå°±åœæ­¢å‘ä¸‹æœç´¢å¹¶å¤„ç†è¯·æ±‚ã€‚

- \*\*~ï¼š\*\*ç”¨äºè¡¨ç¤º url åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚

- \*\*~\*ï¼š\*\*ç”¨äºè¡¨ç¤º url åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚

- \*\*^~ï¼š\*\*ç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ url å‰ï¼Œè¦æ±‚ Nginx æœåŠ¡å™¨æ‰¾åˆ°è¡¨ç¤º url å’Œå­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„ location åï¼Œç«‹å³ä½¿ç”¨æ­¤ location å¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†åŒ¹é…ã€‚

- å¦‚æœæœ‰ url åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸éœ€è¦æœ‰ ~ å¼€å¤´æ ‡è¯†ã€‚

**06\*\*\*\*åå‘ä»£ç†å®æˆ˜**

### **â‘ é…ç½®åå‘ä»£ç†**

ç›®çš„ï¼šåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥åœ°å€ www.123.com è·³è½¬ Linux ç³»ç»Ÿ Tomcat ä¸»é¡µé¢ã€‚

**â‘¡å…·ä½“å®ç°**

å…ˆé…ç½® Tomcatï¼Œå› ä¸ºæ¯”è¾ƒç®€å•ï¼Œæ­¤å¤„ä¸å†èµ˜å™ï¼Œå¹¶åœ¨ Windows è®¿é—®ï¼š
!\[\[Pasted image 20241006112224.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å…·ä½“æµç¨‹å¦‚ä¸‹å›¾ï¼š
!\[\[Pasted image 20241006112227.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

ä¿®æ”¹ä¹‹å‰ï¼š
!\[\[Pasted image 20241006112232.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

é…ç½®å¦‚ä¸‹ï¼š
!\[\[Pasted image 20241006112237.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å†æ¬¡è®¿é—®ï¼š
!\[\[Pasted image 20241006112240.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

**â‘¢åå‘ä»£ç† 2**
ç›®æ ‡ï¼š

- è®¿é—® http://192.168.25.132:9001/edu/ ç›´æ¥è·³è½¬åˆ° 192.168.25.132:8080
- è®¿é—® http://192.168.25.132:9001/vod/ ç›´æ¥è·³è½¬åˆ° 192.168.25.132:8081

\*\*å‡†å¤‡ï¼š\*\*é…ç½®ä¸¤ä¸ª Tomcatï¼Œç«¯å£åˆ†åˆ«ä¸º 8080 å’Œ 8081ï¼Œéƒ½å¯ä»¥è®¿é—®ï¼Œç«¯å£ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯ã€‚å¦å¤–ï¼Œæœç´¢å…¬ä¼—å·é¡¶çº§ç®—æ³•åå°å›å¤â€œç§æ´»ç¥å™¨â€ï¼Œè·å–ä¸€ä»½æƒŠå–œç¤¼åŒ…ã€‚
!\[\[Pasted image 20241006113054.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113057.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

æ–°å»ºæ–‡ä»¶å†…å®¹åˆ†åˆ«æ·»åŠ  8080ï¼ï¼ï¼å’Œ 8081ï¼ï¼ï¼
!\[\[Pasted image 20241006113117.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113121.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å“åº”å¦‚ä¸‹å›¾ï¼š
!\[\[Pasted image 20241006113128.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113144.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å…·ä½“é…ç½®å¦‚ä¸‹ï¼š
!\[\[Pasted image 20241006113151.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

é‡æ–°åŠ è½½ Nginxï¼š

`./nginxÂ -sÂ reload      `

è®¿é—®ï¼š
!\[\[Pasted image 20241006113157.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113202.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å®ç°äº†åŒä¸€ä¸ªç«¯å£ä»£ç†ï¼Œé€šè¿‡ edu å’Œ vod è·¯å¾„çš„åˆ‡æ¢æ˜¾ç¤ºä¸åŒçš„é¡µé¢ã€‚

**åå‘ä»£ç†å°ç»“**

\*\*ç¬¬ä¸€ä¸ªä¾‹å­ï¼š\*\*æµè§ˆå™¨è®¿é—® www.123.comï¼Œç”± host æ–‡ä»¶è§£æå‡ºæœåŠ¡å™¨ ip åœ°å€\
192.168.25.132 www.123.comã€‚

ç„¶åé»˜è®¤è®¿é—® 80 ç«¯å£ï¼Œè€Œé€šè¿‡ Nginx ç›‘å¬ 80 ç«¯å£ä»£ç†åˆ°æœ¬åœ°çš„ 8080 ç«¯å£ä¸Šï¼Œä»è€Œå®ç°äº†è®¿é—® www.123.comï¼Œæœ€ç»ˆè½¬å‘åˆ° tomcat 8080 ä¸Šå»ã€‚

ç¬¬äºŒä¸ªä¾‹å­ï¼š

- è®¿é—® http://192.168.25.132:9001/edu/ ç›´æ¥è·³è½¬åˆ° 192.168.25.132:8080
- è®¿é—® http://192.168.25.132:9001/vod/ ç›´æ¥è·³è½¬åˆ° 192.168.25.132:8081

å®é™…ä¸Šå°±æ˜¯é€šè¿‡ Nginx ç›‘å¬ 9001 ç«¯å£ï¼Œç„¶åé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼é€‰æ‹©è½¬å‘åˆ° 8080 è¿˜æ˜¯ 8081 çš„ Tomcat ä¸Šå»ã€‚

**07**

**è´Ÿè½½å‡è¡¡å®æˆ˜**

â‘ ä¿®æ”¹ nginx.confï¼Œå¦‚ä¸‹å›¾ï¼š
!\[\[Pasted image 20241006113231.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113236.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

â‘¡é‡å¯ Nginxï¼š

`./nginxÂ -sÂ reload      `

â‘¢åœ¨ 8081 çš„ Tomcat çš„ webapps æ–‡ä»¶å¤¹ä¸‹æ–°å»º edu æ–‡ä»¶å¤¹å’Œ a.html æ–‡ä»¶ï¼Œå¡«å†™å†…å®¹ä¸º 8081ï¼ï¼ï¼ï¼

â‘£åœ¨åœ°å€æ å›è½¦ï¼Œå°±ä¼šåˆ†å‘åˆ°ä¸åŒçš„ Tomcat æœåŠ¡å™¨ä¸Šï¼š
!\[\[Pasted image 20241006113240.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113243.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

è´Ÿè½½å‡è¡¡æ–¹å¼å¦‚ä¸‹ï¼š

- è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ã€‚

- weightï¼Œä»£è¡¨æƒï¼Œæƒè¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜ã€‚

- fairï¼ŒæŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œç›¸åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚

- ip_hashï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰ç…§è®¿é—® ip çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸€ä¸ªè®¿å®¢å›ºå®šçš„è®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³ Session çš„é—®é¢˜ã€‚

!\[\[Pasted image 20241006113255.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

______________________________________________________________________

!\[\[Pasted image 20241006113257.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

______________________________________________________________________

!\[\[Pasted image 20241006113302.png\]\]

## !\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

**08**

## **åŠ¨é™åˆ†ç¦»å®æˆ˜**

## ä»€ä¹ˆæ˜¯åŠ¨é™åˆ†ç¦»ï¼ŸæŠŠåŠ¨æ€è¯·æ±‚å’Œé™æ€è¯·æ±‚åˆ†å¼€ï¼Œä¸æ˜¯è®²åŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç‰©ç†åˆ†ç¦»ï¼Œå¯ä»¥ç†è§£ä¸º Nginx å¤„ç†é™æ€é¡µé¢ï¼ŒTomcat å¤„ç†åŠ¨æ€é¡µé¢ã€‚

åŠ¨é™åˆ†ç¦»å¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼š

- çº¯ç²¹å°†é™æ€æ–‡ä»¶ç‹¬ç«‹æˆå•ç‹¬åŸŸåæ”¾åœ¨ç‹¬ç«‹çš„æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿæ˜¯ç›®å‰ä¸»æµæ–¹æ¡ˆã€‚[å…³æ³¨Javaåç«¯æ ˆ](http://mp.weixin.qq.com/s?__biz=MzkwOTI2ODY1Mg==&mid=2247484529&idx=1&sn=8d377f48747ab0bb00050cd4fed9e032&chksm=c13c07b2f64b8ea4f8f666988da96db4e3c0818318c819ddf82829a6c1ae1e63c4eb0e3bb7e9&scene=21#wechat_redirect)

- å°†åŠ¨æ€è·Ÿé™æ€æ–‡ä»¶æ··åˆåœ¨ä¸€èµ·å‘å¸ƒï¼Œé€šè¿‡ Nginx åˆ†å¼€ã€‚

#### åŠ¨é™åˆ†ç¦»å›¾æï¼š

!\[\[Pasted image 20241006113311.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å®æˆ˜å‡†å¤‡ï¼Œå‡†å¤‡é™æ€æ–‡ä»¶ï¼š
!\[\[Pasted image 20241006113316.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)
!\[\[Pasted image 20241006113319.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

é…ç½® Nginxï¼Œå¦‚ä¸‹å›¾ï¼š
!\[\[Pasted image 20241006113323.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

Nginx é«˜å¯ç”¨

å¦‚æœ Nginx å‡ºç°é—®é¢˜ï¼š
!\[\[Pasted image 20241006113327.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

è§£å†³åŠæ³•ï¼š
!\[\[Pasted image 20241006113331.png\]\]!\[\[Pasted image 20241006113344.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å‰æœŸå‡†å¤‡ï¼š

- **ä¸¤å° Nginx æœåŠ¡å™¨**

- **å®‰è£… Keepalived**

- **è™šæ‹Ÿ ip**

## å®‰è£… Keepalivedï¼š

`[root@192Â usr]#Â yumÂ installÂ keepalivedÂ -y[root@192Â usr]#Â rpmÂ -qÂ -aÂ keepalivedkeepalived-1.3.5-16.el7.x86_64      `

ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š

`[root@192Â keepalived]#Â cdÂ /etc/keepalived[root@192Â keepalived]#Â viÂ keepalived.conf      `

åˆ†åˆ«å°†å¦‚ä¸‹é…ç½®æ–‡ä»¶å¤åˆ¶ç²˜è´´ï¼Œè¦†ç›–æ‰ keepalived.confï¼Œè™šæ‹Ÿ ip ä¸º 192.168.25.50ã€‚

å¯¹åº”ä¸»æœº ip éœ€è¦ä¿®æ”¹çš„æ˜¯ï¼š

- smtp_server 192.168.25.147ï¼ˆä¸»ï¼‰smtp_server 192.168.25.147ï¼ˆå¤‡ï¼‰

- state MASTERï¼ˆä¸»ï¼‰ state BACKUPï¼ˆå¤‡ï¼‰

`global_defsÂ {Â Â Â notification_emailÂ {Â Â Â Â Â acassen@firewall.loc`Â Â Â Â Â `failover@firewall.locÂ Â Â Â Â sysadmin@firewall.locÂ Â Â }Â Â Â notification_email_fromÂ Alexandre.Cassen@firewall.locÂ Â Â smtp_serverÂ 192.168.25.147Â Â Â smtp_connect_timeoutÂ 30Â Â Â router_idÂ LVS_DEVELÂ #Â è®¿é—®çš„ä¸»æœºåœ°å€}vrrp_scriptÂ chk_nginxÂ {Â Â scriptÂ "/usr/local/src/nginx_check.sh"Â Â #Â æ£€æµ‹æ–‡ä»¶çš„åœ°å€Â Â intervalÂ 2Â Â Â #Â æ£€æµ‹è„šæœ¬æ‰§è¡Œçš„é—´éš”Â Â weightÂ 2Â Â Â #Â æƒé‡}vrrp_instanceÂ VI_1Â {Â Â Â Â stateÂ BACKUPÂ Â Â Â #Â ä¸»æœºMASTERã€å¤‡æœºBACKUPÂ Â Â Â Â Â Â Â interfaceÂ ens33Â Â Â #Â ç½‘å¡Â Â Â Â virtual_router_idÂ 51Â #Â åŒä¸€ç»„éœ€ä¸€è‡´Â Â Â Â priorityÂ 90Â Â #Â è®¿é—®ä¼˜å…ˆçº§ï¼Œä¸»æœºå€¼è¾ƒå¤§ï¼Œå¤‡æœºè¾ƒå°Â Â Â Â advert_intÂ 1Â Â Â Â authenticationÂ {Â Â Â Â Â Â Â Â auth_typeÂ PASSÂ Â Â Â Â Â Â Â auth_passÂ 1111Â Â Â Â }Â Â Â Â virtual_ipaddressÂ {Â Â Â Â Â Â Â Â 192.168.25.50Â Â #Â è™šæ‹ŸipÂ Â Â Â }}`

å¯åŠ¨ä»£ç å¦‚ä¸‹ï¼š

`[root@192Â sbin]#Â systemctlÂ startÂ keepalived.service`
!\[\[Pasted image 20241006113346.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

è®¿é—®è™šæ‹Ÿ ip æˆåŠŸï¼š
!\[\[Pasted image 20241006113351.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å…³é—­ä¸»æœº 147 çš„ Nginx å’Œ Keepalivedï¼Œå‘ç°ä»ç„¶å¯ä»¥è®¿é—®ã€‚

åŸç†è§£æ
!\[\[Pasted image 20241006113355.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å¦‚ä¸‹å›¾ï¼Œå°±æ˜¯å¯åŠ¨äº†ä¸€ä¸ª masterï¼Œä¸€ä¸ª workerï¼Œmaster æ˜¯ç®¡ç†å‘˜ï¼Œworkeræ˜¯å…·ä½“å·¥ä½œçš„è¿›ç¨‹ã€‚
!\[\[Pasted image 20241006113400.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

worker å¦‚ä½•å·¥ä½œï¼Ÿå¦‚ä¸‹å›¾ï¼š
!\[\[Pasted image 20241006113404.png\]\]
!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

å°ç»“

worker æ•°åº”è¯¥å’Œ CPU æ•°ç›¸ç­‰ï¼›ä¸€ä¸ª master å¤šä¸ª worker å¯ä»¥ä½¿ç”¨çƒ­éƒ¨ç½²ï¼ŒåŒæ—¶ worker æ˜¯ç‹¬ç«‹çš„ï¼Œä¸€ä¸ªæŒ‚äº†ä¸ä¼šå½±å“å…¶ä»–çš„ã€‚

æœ€åç»™è¯»è€…æ•´ç†äº†ä¸€ä»½**BAT**å¤§å‚é¢è¯•çœŸé¢˜ï¼Œéœ€è¦çš„å¯æ‰«ç å›å¤â€œ**é¢è¯•é¢˜**â€å³å¯è·å–ã€‚

!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

****!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)****

å…¬ä¼—å·åå°å›å¤Â **æ¶æ„**Â æˆ–è€…Â **æ¶æ„æ•´æ´**Â æœ‰æƒŠå–œç¤¼åŒ…ï¼

**é¡¶çº§æ¶æ„å¸ˆäº¤æµç¾¤**

**ã€Œé¡¶çº§æ¶æ„å¸ˆã€å»ºç«‹äº†è¯»è€…æ¶æ„å¸ˆäº¤æµç¾¤ï¼Œå¤§å®¶å¯ä»¥æ·»åŠ å°ç¼–å¾®ä¿¡è¿›è¡ŒåŠ ç¾¤ã€‚æ¬¢è¿æœ‰æƒ³æ³•ã€ä¹äºåˆ†äº«çš„æœ‹å‹ä»¬ä¸€èµ·äº¤æµå­¦ä¹ ã€‚**

!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

æ‰«ææ·»åŠ å¥½å‹é‚€ä½ è¿›æ¶æ„å¸ˆç¾¤ï¼ŒåŠ æˆ‘æ—¶æ³¨æ˜\*\*ã€\*\***å§“å+å…¬å¸+èŒä½ã€‘**

**ç‰ˆæƒç”³æ˜ï¼šå†…å®¹æ¥æºç½‘ç»œï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚å¦‚æœ‰ä¾µæƒçƒ¦è¯·å‘ŠçŸ¥ï¼Œæˆ‘ä»¬ä¼šç«‹å³åˆ é™¤å¹¶è¡¨ç¤ºæ­‰æ„ã€‚è°¢è°¢ã€‚**

çŒœä½ è¿˜æƒ³çœ‹

[æ¨èä¸€å¥—å¼€æºé€šç”¨åå°ç®¡ç†ç³»ç»Ÿï¼ˆé™„æºç ï¼‰](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247517463&idx=1&sn=39841b9fb02e185d4cb06df7f5b7cc02&chksm=e8da24b2dfadada4eea431a3df5ea184203cdc1cf4f833549f80956328901c5e005f8d388583&scene=21#wechat_redirect)

[çœ‹çœ‹äººå®¶é‚£ IM å³æ—¶é€šè®¯ç³»ç»Ÿï¼Œé‚£å«ä¸€ä¸ªä¼˜é›…ï¼ˆé™„æºç ï¼‰](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247520498&idx=1&sn=247bed1ab2e30cad54981a3eeff00810&chksm=e8da3157dfadb84118310e1067c0af1e8fc3e41b15d2dfde8ab61889b8522f603bbda08bed8c&scene=21#wechat_redirect)

[é¢è¯•å®˜ï¼šç”Ÿæˆè®¢å•30åˆ†é’Ÿæœªæ”¯ä»˜ï¼Œåˆ™è‡ªåŠ¨å–æ¶ˆï¼Œè¯¥æ€ä¹ˆå®ç°ï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247520660&idx=1&sn=ea62f593bebb58a33bb77b7e65ec8a86&chksm=e8da3031dfadb927fd40c6608bc727bacc53309afcf868f10b5ba2c3153024904c92332fe5ef&scene=21#wechat_redirect)

[é˜¿é‡ŒæŠ€æœ¯ä¸“å®¶ï¼šä¸€æ–‡æ•™ä½ é«˜æ•ˆç”»å‡ºæŠ€æœ¯æ¶æ„å›¾](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247506842&idx=1&sn=5387bf6dca96e01d5ce00400a91dde3e&chksm=e8da7a3fdfadf329bb65307a9a830e80911f1118a3e6878f0f6ed530e0940b43bf505655dfea&scene=21#wechat_redirect)

[16ä¸ª Redis å¸¸è§ä½¿ç”¨åœºæ™¯ï¼Œé¢è¯•æœ‰å†…å®¹èŠå•¦](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247516679&idx=1&sn=78f34a21846352643195ae2a36b13f67&chksm=e8da23a2dfadaab4bf299ab717a2b5dcc33efb9a4bfc10bb00009317d08c06227297dd209f3c&scene=21#wechat_redirect)

[é¢è¯•å®˜é—®ï¼šMySQLçš„è‡ªå¢ ID ç”¨å®Œäº†ï¼Œæ€ä¹ˆåŠï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247517190&idx=2&sn=737c69e45fceb1e672bc81b2141d6f5d&chksm=e8da25a3dfadacb55a8c96b8fb78c8aa3c385284c5e591fd3509bc4521114795a99184dbcf17&scene=21#wechat_redirect)[](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247523669&idx=2&sn=8fa8b3492f10fbee1b3308f2e53d1519&chksm=e8da3cf0dfadb5e6c44612004413499ae32efd0121df83e426d63bcb8fe6380a3a7cf5d2a0bd&scene=21#wechat_redirect)

[çŸ¥åå›½äº§è®ºå›ï¼Œå‡‰äº†ï¼ï¼ï¼ï¼](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247523798&idx=1&sn=e6d5fe0f220f8be30d01c4b3c9d024f3&chksm=e8da3c73dfadb56578a7bb03956c9009b86daa3682ea6a8f09456abc2be939a37e01cf817bbc&scene=21#wechat_redirect)

[Elasticsearch å†™å…¥ä¼˜åŒ–è®°å½•ï¼Œä»3000åˆ°8000/s](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533738&idx=2&sn=bac4033a49aed0c1070ffe1f95671ea8&chksm=e8dae50fdfad6c19b3e9c5ff6410ba122d94528f90561986f17872dc53fd6681dce56bd755fe&scene=21#wechat_redirect)

[åˆ†å¸ƒå¼å­˜å‚¨çš„ä¸ƒæ–¹é¢é—®é¢˜](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533791&idx=2&sn=72ae93197287f467dd6639bf9a8162b7&chksm=e8dae57adfad6c6cdafc37a120d587c0aa52c9ce3a5f3f7a9f7fe627186ca2bb5b3ca63dbcec&scene=21#wechat_redirect)

[è®¢å•30åˆ†é’Ÿæœªæ”¯ä»˜ï¼Œåˆ™è‡ªåŠ¨å–æ¶ˆï¼Œè¯¥æ€ä¹ˆå®ç°ï¼Ÿ](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533872&idx=2&sn=603d0f1f2045a4189e239e7f9837a968&chksm=e8dae495dfad6d8315798ca7844149212c3708241520ffc5ab20a13ab76938d15ef50c7ad8f5&scene=21#wechat_redirect)

[å¤šè´¦å·ç»Ÿä¸€ç™»é™†ï¼Œè´¦å·æ¨¡å—çš„ç³»ç»Ÿè®¾è®¡](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533935&idx=2&sn=afbaf07ca3d584936a7af3b921f17a36&chksm=e8dae4cadfad6ddc7e09f0e14c74f04c06d60b68a1bd3500cf6fb06a220f04949da3e8b04a0c&scene=21#wechat_redirect)

[å¾®æœåŠ¡æ¶æ„ç»Ÿä¸€å®‰å…¨è®¤è¯è®¾è®¡ä¸å®è·µ](http://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247533715&idx=2&sn=23796e219029ffe26bf51a12528bdd91&chksm=e8dae536dfad6c200be43350b949f9a769eece0def34ed0896ef8d3288ccb6d381ce491d383e&scene=21#wechat_redirect)

!\[å›¾ç‰‡\](data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='1px' height='1px' viewBox='0 0 1 1' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Ctitle%3E%3C/title%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd' fill-opacity='0'%3E%3Cg transform='translate(-249.000000, -126.000000)' fill='%23FFFFFF'%3E%3Crect x='249' y='126' width='1' height='1'%3E%3C/rect%3E%3C/g%3E%3C/g%3E%3C/svg%3E)

é˜…è¯»åŸæ–‡

é˜…è¯»Â 1022

â€‹

å†™ç•™è¨€

**ç•™è¨€ 1**

- é€æ¢¦ã€å°‘å¹´

  2022å¹´3æœˆ31æ—¥

  èµ1

  è¿™æ–‡ç« çš„åå‘ä»£ç†æœ‰ä¸€å¤„çš„é…ç½®æ²¡é…ï¼Œlocalhosté‡Œé¢æ²¡æœ‰proxy_set_header Host $host;è¿™è¡Œä»£ç æ˜¯æ— æ³•è¿›è¡Œåå‘ä»£ç†çš„ï¼Œä¼šæŠ¥404é”™è¯¯ï¼Œå¯ä»¥å»å®è·µä¸€ä¸‹ï¼Œç½‘ä¸Šçš„æ€»ç»“å¤§å¤šæ•°æ²¡æœ‰è¿™è¡Œä»£ç 

å·²æ— æ›´å¤šæ•°æ®

[](javacript:;)

![](http://mmbiz.qpic.cn/sz_mmbiz_png/gHvX5TiczgWlCsOPBib3qa34WKGOy72FcvqTvt9icWjB0223JqDtJtD25EmBcaFxlJJ8P2r6KEADI3KYw7H1zuMRg/300?wx_fmt=png&wxfrom=18)

é¡¶çº§æ¶æ„å¸ˆ

10åˆ†äº«7

1

å†™ç•™è¨€

**ç•™è¨€ 1**

- é€æ¢¦ã€å°‘å¹´

  2022å¹´3æœˆ31æ—¥

  èµ1

  è¿™æ–‡ç« çš„åå‘ä»£ç†æœ‰ä¸€å¤„çš„é…ç½®æ²¡é…ï¼Œlocalhosté‡Œé¢æ²¡æœ‰proxy_set_header Host $host;è¿™è¡Œä»£ç æ˜¯æ— æ³•è¿›è¡Œåå‘ä»£ç†çš„ï¼Œä¼šæŠ¥404é”™è¯¯ï¼Œå¯ä»¥å»å®è·µä¸€ä¸‹ï¼Œç½‘ä¸Šçš„æ€»ç»“å¤§å¤šæ•°æ²¡æœ‰è¿™è¡Œä»£ç 

å·²æ— æ›´å¤šæ•°æ®
